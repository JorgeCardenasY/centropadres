{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sistema de gestiÃ³n para el Centro de Padres y Apoderados">
    <title>{% block title %}Centro de Padres{% endblock %}</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .welcome-text {
            text-shadow: 0 0 3px white, 0 0 5px white;
        }
    </style>
</head>
<body>
    {% include 'navbar.html' %}
    
    <div id="root">
        <div>
            {% block content %}
            {% endblock content %}
        </div>
    </div>
    
    {% include 'footer.html' %}
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButton = document.getElementById('background-toggle');
            const backgroundContainer = document.getElementById('background-container');
            const pageFooter = document.getElementById('page-footer');

            function setFooterStyle(bg) {
                if (!pageFooter) return;
                if (bg.includes('cloudBg.png')) {
                    pageFooter.classList.remove('bg-dark');
                    pageFooter.classList.add('bg-success', 'text-white');
                } else {
                    pageFooter.classList.remove('bg-success');
                    pageFooter.classList.add('bg-dark', 'text-white');
                }
            }

            // Set initial footer style
            if (backgroundContainer) {
                setFooterStyle(backgroundContainer.style.backgroundImage);
            }
            
            if (toggleButton && backgroundContainer) {
                toggleButton.addEventListener('click', function() {
                    const currentBg = backgroundContainer.style.backgroundImage;
                    
                    if (currentBg.includes('cloudBg.png')) {
                        backgroundContainer.style.backgroundImage = "url('{% static 'img/cloudDark.png' %}')";
                    } else {
                        backgroundContainer.style.backgroundImage = "url('{% static 'img/cloudBg.png' %}')";
                    }
                    setFooterStyle(backgroundContainer.style.backgroundImage);
                });
            }

            const accordionItems = document.querySelectorAll('.accordion-item-custom');

            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header-custom');
                const content = item.querySelector('.accordion-content-custom');
                const icon = header.querySelector('.icon');

                header.addEventListener('click', () => {
                    const isOpen = content.style.maxHeight;

                    // Close all other accordions
                    accordionItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.querySelector('.accordion-content-custom').style.maxHeight = null;
                            otherItem.querySelector('.icon').textContent = '+';
                        }
                    });

                    if (isOpen) {
                        content.style.maxHeight = null;
                        icon.textContent = '+';
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        icon.textContent = '-';
                    }
                });
            });
        });
    </script>
</body>
</html>
