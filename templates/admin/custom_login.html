{% extends "admin/login.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
{% endblock %}

{% block extrabody %}
{{ block.super }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const bodyElement = document.querySelector('body.login'); // target the specific body for login
        const lightBg = "{% static 'img/cloudBg.png' %}";
        const darkBg = "{% static 'img/cloudDark.png' %}";

        function setLoginBackground(theme) {
            if (bodyElement) {
                if (theme === 'dark') {
                    bodyElement.style.backgroundImage = `url('${darkBg}')`;
                } else {
                    bodyElement.style.backgroundImage = `url('${lightBg}')`;
                }
                bodyElement.style.backgroundSize = 'cover';
                bodyElement.style.backgroundRepeat = 'no-repeat';
                bodyElement.style.backgroundPosition = 'center';
            }
        }

        // Set initial background
        const savedTheme = localStorage.getItem('theme') || 'light';
        setLoginBackground(savedTheme);

        // Listen for changes from other tabs
        window.addEventListener('storage', function(event) {
            if (event.key === 'theme') {
                setLoginBackground(event.newValue);
            }
        });
    });
</script>
{% endblock %}
